#* @vtlvariable name="elw_messages" type="elw.miniweb.Message[]" *#
#* @vtlvariable name="elw_ctx" type="elw.dao.Ctx" *#
#parse("t/elw.macro.vm")
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
	<meta content="text/html; charset=UTF-8">
	<title>Course ${elw_ctx.course.name} : ELW Admin</title>
	<link href="../css/elw.css" type="text/css" rel="stylesheet"/>
	<script type="text/javascript" src="../js/jquery.js"></script>
	<script type="text/javascript" src="../js/jquery.sha1.js"></script>
</head>
<body>
<div id="header">
	<div id="nav"><a href="index">Index</a> &gt; <a href="courses">Courses</a> &gt; <span style="font-weight: bold">${elw_ctx.course.name}</span></div>
	#elw_cred_adm($auth)
	<div id="header_hr"> </div>
</div>
#elw_messages($elw_messages)
<div id=main>
	<table cellspacing="0" cellpadding="0"><tbody>
	<tr>
		<td style="padding-left: 1em;padding-right: 0.25em; width: 40em;">Types:</td>
		<td style="width: 8em;">&nbsp;</td>
		<td style="width: 8em;">&nbsp;</td>
	</tr>
	#foreach($assType in $elw_ctx.course.assTypes)
	<tr>
		<td style="padding-left: 1.5em; padding-right: 0.25em;">${assType.name}</td>
		<td style="text-align: center; border: 1px red dotted;">[&nbsp;<a href="#" class="expandTrigger" id="${assType.id}">Assignments</a>&nbsp;]</td>
		<td>&nbsp;</td>
	</tr>
	 #foreach($ass in $assType.assignments)
	<tr class="header ${assType.id}" style="display: none;" >
		<td style="padding-left: 2em; padding-right: 0.25em;">
			<span title="id=#if($ass.id)$ass.id#{else}null#end">$ass.name</span>
		</td>
		<td style="text-align: center;border: 1px red dotted;">[&nbsp;<a href="#" class="expandTrigger" id="${assType.id}__${ass.id}">Versions</a>&nbsp;]</td>
		<td>&nbsp;</td>
	</tr>
		#foreach($ver in $ass.versions)
		#set($assCtx=$elw_ctx.extendTAV(${assType}, ${ass}, ${ver}))
	<tr class="${assType.id}__${ass.id}" style="display: none;">
		<td style="padding-left: 3em;">
			$ver.name&nbsp;<span style="font-size: smaller">(id:&nbsp;#if($ver.id)$ver.id#{else}null#end)</span>
		</td>
		<td style="text-align: center; border: 1px red dotted;">
			[&nbsp;<a href="launch?elw_ctx=$assCtx">Code</a>&nbsp;]
		</td>
		<td style="padding-left: 0.25em; padding-right: 0.25em;">
			#if($testResults)
			#set($res=$testResults.get($assCtx.toString()))
				#if($res.success)#set($resColor="#00FF00")#else#set($resColor="#FF0000")#end
				<span style="color:$resColor">$res.message</span>
			#else
				&nbsp;
			#end
		</td>
	</tr>
		#end
	 #end
	#end
	</tbody></table>
</div>
</body>
<script type="text/javascript">
	jQuery(document).ready(function() {
		jQuery(".expandTrigger").toggle(function() {
			jQuery("."+this.id).slideDown(0);
		}, function() {
			jQuery("."+this.id).slideUp();
			jQuery("[class^="+this.id+"]").slideUp();
		});
	});
</script>
</html>