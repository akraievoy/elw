#* @vtlvariable name="elw_messages" type="elw.miniweb.Message[]" *#
#* @vtlvariable name="elw_student" type="elw.vo.Student" *#
#* @vtlvariable name="elw_group" type="elw.vo.Group" *#
#* @vtlvariable name="course" type="elw.vo.Course" *#
#* @vtlvariable name="studId" type="java.lang.Integer" *#
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
	<meta content="text/html; charset=UTF-8">
	<title>Course ${course.name} Structure</title>
	<link href="../css/elw.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<div id="header">
	<div id="nav"><a href="courses">My Courses</a> &gt; <span style="font-weight: bold">${course.name}</span></div>
	&nbsp;
	<div id="cred">[&nbsp;$elw_group.name&nbsp;$elw_student.name&nbsp;]&nbsp;[&nbsp;<a href="logout">X</a>&nbsp;]</div>
</div>
<div id=messages>#foreach($m in $elw_messages)
	<div class="$m.type">$m.message</div>
#end
</div>
<div id=main>
	<table><tbody>
	<tr><td style="padding-left: 2em;" colspan=3>Assignment bundles:</td></tr>
	#foreach($assBundle in $course.assBundles)#set($bunI = $velocityCount - 1)
	<tr><td style="padding-left: 3em;" colspan=3>Assignments:</td></tr>
	 #foreach($ass in $assBundle.assignments)#set($assI = $velocityCount)
		#if($ass.id)
			#if($ass.shared)
	<tr>
		<td style="padding-left: 5em; border-bottom: #CCCCCC dotted 1px; background-color: #EEEEEE;">
		$ass.name
		</td>
		<td style="padding-left: 1em; padding-right: 1em; text-align: right; border-bottom: #CCCCCC dotted 1px; background-color: #EEEEEE;"  colspan=2>
			Opens $enr.classes.get($ass.scoring.classFrom).niceDate, due $enr.classes.get($ass.scoring.classReportDue).niceDate
		</td>
	</td></tr>
				#foreach($ver in $ass.versions)#set($verI = $velocityCount)
					#if($ver.id)
	<tr>
		<td style="padding-left: 8em;">$ver.name</td>
		<td style="padding-left: 1em; padding-right: 1em;">[&nbsp;<a href="launch?path=${course.id}--${bunI}--${ass.id}--${ver.id}">Code</a>&nbsp;]</td>
		<td style="padding-left: 1em; padding-right: 1em;"></td>
	</tr>
					#end
		 		#end
			#else
	<tr><td style="padding-left: 5em; border-bottom: #CCCCCC dotted 1px; background-color: #EEEEEE;" colspan=3>
		$ass.name
		<div style="float: right">
			$ass.scoring.scoreBudget pts.
			Opens $enr.classes.get($ass.scoring.classFrom).niceDate, due $enr.classes.get($ass.scoring.classReportDue).niceDate
		</div>
	</td></tr>
				#if($enr.classes.get($ass.scoring.classFrom).started)
					#set($verIdx = $studId % $ass.versions.size())
					#set($ver = $ass.versions.get($verIdx))
	<tr>
		<td style="padding-left: 8em;">$ver.name</td>
		<td style="padding-left: 1em; padding-right: 1em;">[&nbsp;<a href="launch?path=${course.id}--${bunI}--${ass.id}--${ver.id}">Code</a>&nbsp;]</td>
		<td style="padding-left: 1em; padding-right: 1em;">[&nbsp;<a href="uploadPage?path=${course.id}--${bunI}--${ass.id}--${ver.id}">Report</a>&nbsp;]</td>
	</tr>
				#end
			#end
		#end
	 #end
	#end
	</tbody></table>
</div>
</body>
</html>