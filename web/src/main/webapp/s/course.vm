#* @vtlvariable name="elw_messages" type="elw.miniweb.Message[]" *#
#* @vtlvariable name="elw_student" type="elw.vo.Student" *#
#* @vtlvariable name="elw_group" type="elw.vo.Group" *#
#* @vtlvariable name="course" type="elw.vo.Course" *#
#* @vtlvariable name="studId" type="java.lang.Integer" *#
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
	<meta content="text/html; charset=UTF-8">
	<title>Course ${course.name} Structure</title>
	<link href="../css/elw.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<div id="header">
	<div id="nav"><a href="courses">My Courses</a> &gt; <span style="font-weight: bold">${course.name}</span></div>
	&nbsp;
	<div id="cred">[&nbsp;$elw_group.name&nbsp;$elw_student.name&nbsp;]&nbsp;[&nbsp;<a href="logout">X</a>&nbsp;]</div>
</div>
<div id=messages>#foreach($m in $elw_messages)
	<div class="$m.type">$m.message</div>
#end
</div>
<div id=main>
	<table cellspacing="0"><tbody>
	<tr><td style="padding-left: 1em;" colspan=4>Assignment bundles:</td></tr>
	#foreach($assBundle in $course.assBundles)#set($bunI = $velocityCount - 1)
	<tr><td style="padding-left: 1.25em;" colspan=4>Assignments:</td></tr>
	 #foreach($ass in $assBundle.assignments)#set($assI = $velocityCount)
		#if($ass.id)
			#if($ass.shared)
	<tr>
		<td style="padding-left: 2em; padding-right: 1em; border-right: #999999 dashed 1px; border-bottom: #CCCCCC dotted 1px; background-color: #EEEEEE;">
		$ass.name
		</td>
		<td style="padding-left: 0.25em; padding-right: 0.25em; text-align: center; border-bottom: #CCCCCC dotted 1px; background-color: #EEEEEE; text-align:center;"  colspan=2>
			#if(!$enr.classes.get($ass.scoring.classFrom).started)Opens $enr.classes.get($ass.scoring.classFrom).niceDate#end &nbsp;
		</td>
	  <td style="padding-left: 0.25em; padding-right: 0.25em; border-bottom: #CCCCCC dotted 1px; background-color: #EEEEEE;">&nbsp;</td>
	</tr>
				#if($enr.classes.get($ass.scoring.classFrom).started)
					#foreach($ver in $ass.versions)#set($verI = $velocityCount)
						#if($ver.id)
	<tr>
		<td style="padding-left: 2.5em; padding-right: 1em; border-right: #999999 dashed 1px;">$ver.name</td>
		<td style="padding-left: 0.25em; padding-right: 0.25em; text-align: right;">[&nbsp;<a href="launch?path=${course.id}--${bunI}--${ass.id}--${ver.id}">Code</a>&nbsp;]</td>
		<td style="padding-left: 0.25em; padding-right: 0.25em;">&nbsp;</td>
		<td style="padding-left: 0.25em; padding-right: 0.25em;">&nbsp;</td>
	</tr>
						#end
			 		#end
				#end
			#else
	<tr>
		<td style="padding-left: 2em; padding-right: 1em; border-right: #999999 dashed 1px; border-bottom: #CCCCCC dotted 1px; background-color: #EEEEEE; ">$ass.name</td>
				#if($enr.classes.get($ass.scoring.classFrom).started)
		<td style="padding-left: 0.25em; padding-right: 0.25em; border-bottom: #CCCCCC dotted 1px; background-color: #EEEEEE; text-align: center;">
			Due $enr.classes.get($ass.scoring.classCodeDue).niceDate
		</td>
		<td style="padding-left: 0.25em; padding-right: 0.25em; border-bottom: #CCCCCC dotted 1px; background-color: #EEEEEE; text-align: center;">
			Due $enr.classes.get($ass.scoring.classReportDue).niceDate
		</td>
				#else
		<td style="padding-left: 0.25em; padding-right: 0.25em;  border-bottom: #CCCCCC dotted 1px; background-color: #EEEEEE; text-align: center;" colspan="2">
			Opens $enr.classes.get($ass.scoring.classFrom).niceDate
		</td>
				#end
		<td style="padding-left: 0.25em; padding-right: 0.25em; border-bottom: #CCCCCC dotted 1px; background-color: #EEEEEE; text-align: right;">$ass.scoring.scoreBudget pts.</td>
	</td></tr>
				#if($enr.classes.get($ass.scoring.classFrom).started)
					#set($verIdx = $studId % $ass.versions.size())
					#set($ver = $ass.versions.get($verIdx))
					#set($path = "${course.id}--${bunI}--${ass.id}--${ver.id}")
					#set($codeMeta = $codeMetas.get($path))
					#set($reportMeta = $reportMetas.get($path))
	<tr>
		<td style="padding-left: 2.5em; padding-right: 1em; border-right: #999999 dashed 1px;">$ver.name</td>
		<td style="padding-left: 0.25em; padding-right: 0.25em; text-align: right;">
			$codeMeta.totalUploads upload#if($codeMeta.totalUploads != 1)s#end#if($codeMeta.totalUploads > 0), #if($codeMeta.totalUploads > 1)last#{else}on#end $codeMeta.niceUploadStamp<br/>
				#if($codeMeta.validatorStamp > 0)
					#set($passColor = "#if($codeMeta.testsPassed>0)#00FF00#else#999999#end")
					#set($failColor = "#if($codeMeta.testsFailed>0)#FF0000#else#999999#end")
					<span style="color: $passColor;">$codeMeta.testsPassed&nbsp;Pass</span> /
					<span style="color: $failColor;">$codeMeta.testsFailed&nbsp;Fail</span>
				#else
					Tests Pending
				#end
			#end
			[&nbsp;<a href="launch?path=$path">Code</a>&nbsp;]
		</td>
		<td style="padding-left: 0.25em; padding-right: 0.25em; text-align: right;">
			$reportMeta.totalUploads upload#if($reportMeta.totalUploads != 1)s#end#if($reportMeta.totalUploads > 0), #if($reportMeta.totalUploads > 1)last#{else}on#end $reportMeta.niceUploadStamp<br/>
				Approval Pending
			#end
			[&nbsp;<a href="uploadPage?path=$path">Report</a>&nbsp;]
		</td>
		<td style="padding-left: 0.25em; padding-right: 0.25em; text-align: right;">&nbsp;</td>
	</tr>
				#end
			#end
		#end
	 #end
	#end
	</tbody></table>
</div>
</body>
</html>