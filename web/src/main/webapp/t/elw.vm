#macro(elw_imports $p_relPath)
	<link type="text/css" rel="stylesheet" href="${p_relPath}css/elw.css"/>
	<link type="text/css" rel="stylesheet" href="${p_relPath}css/jquery.jgrowl.css"/>
	<link type="text/css" rel="stylesheet" href="${p_relPath}css/jquery-ui-1.8.5.custom.css"/>
	<script type="text/javascript" src="${p_relPath}js/jquery-1.4.2.js"></script>
	<script type="text/javascript" src="${p_relPath}js/jquery.cookie.js"></script>
	<script type="text/javascript" src="${p_relPath}js/jquery.codecs.js"></script>
	<script type="text/javascript" src="${p_relPath}js/jquery-ui-1.8.5.custom.min.js"></script>
	<script type="text/javascript" src="${p_relPath}js/jquery.jgrowl.js"></script>
#end

#macro(elw_ready $p_relPath $p_page)
	<script type="text/javascript" src="${p_relPath}js/elw.js"></script>
	#if($p_page)
		<script type="text/javascript">
   elw_updateExpandTriggersUri = "${p_relPath}s/updateExpandTriggers?view=$p_page";
		</script>
	#end
#end

#macro(elw_messages $elw_messages)
<script type="text/javascript">
	jQuery(document).ready(function() {
  jQuery.jGrowl.defaults.position = "center";
  #foreach($m in $elw_messages)
			#if($m.type == "err")
				jQuery.jGrowl("$m.message", {"header":"Error", "theme": "ui-state-error", "sticky": true});
			#end
			#if($m.type == "warn")
				jQuery.jGrowl("$m.message", {"header":"Warning", "theme": "ui-state-error", "sticky": true});
			#end
			#if($m.type == "info")
				jQuery.jGrowl("$m.message", {"header":"Info", "life": 7000,  "theme": "ui-state-highlight"});
			#end
		#end
	});
</script>
#end

#macro (elw_cred_stud $elw_ctx)
#if($elw_ctx.group)#if($elw_ctx.student)#set($auth="true") #end #end
<div id="cred">
	#if($auth)
		<span style="font-size: 1.3em">[&nbsp;$elw_ctx.group.name&nbsp;$elw_ctx.student.name&nbsp;]</span>&nbsp;
		<form method="GET" style="display:inline; margin: 0 0.25em; padding: 0;" action="logout">
			<button type="submit" class="elw_button_logout">Log Out</button>
		</form>
	#else
		<span style="font-size: 1.3em">[&nbsp;Anonymous&nbsp;]</span>
	#end
</div>
#end

#macro (elw_cred_adm $auth)
<div id="cred">
	#if($auth)
		[&nbsp;Admin&nbsp;]&nbsp;
		<form method="GET" style="display:inline; margin: 0 0.25em; padding: 0;" action="logout">
			<input type="Submit" value="Log Out" style="margin: 0;"/>
		</form>
	#{else}
		[&nbsp;Anonymous&nbsp;]
	#end
</div>
#end

#macro (elw_code_state $elw_ctx, $meta)
	#set($dueClass = $elw_ctx.enr.classes.get($elw_ctx.ass.scoring.classCodeDue))
	#set($overdue = $dueClass.passed && ($meta.totalUploads == 0 || $meta.passRatio == 0))
	<div style="width: 100%; text-align: center; #if($overdue)background-color: #EE9999;#end">
	#if($meta.totalUploads > 0)
			<span title="$meta.niceUploadStamp">
				#if($meta.validatorStamp > 0)
					#set($passColor = "#if($meta.testsPassed>0)#00FF00#else#999999#end")
					#set($failColor = "#if($meta.testsFailed>0)#FF0000#else#999999#end")
						<span style="color: $passColor;">${meta.testsPassed}P</span>/<span
									style="color: $failColor;">${meta.testsFailed}F</span>
				#else
					Pending
				#end
			</span>
		#else
			None
		#end
	</div>
#end

#macro (elw_report_state $elw_ctx, $meta )
  #set($dueClass = $elw_ctx.enr.classes.get($elw_ctx.ass.scoring.classReportDue))
	#set($overdue = $dueClass.passed && ($meta.totalUploads == 0 || $meta.scoreStamp == -1))
	<div style="width: 100%; text-align: center; #if($overdue)background-color: #EE9999;#end">
	#if($meta.totalUploads > 0)
			<span title="$meta.niceUploadStamp">
				#if($meta.scoreStamp < 0)
					<span style="color: #FF0000">Declined</span>
				#else
					#if($meta.scoreStamp > 0)
						<span style="color: #00FF00">Approved</span>
					#else
						<span style="color: #999999">Pending</span>
					#end
				#end
			</span>
		#else
			None
		#end
	</div>
#end

#macro (elw_code_score $elw_ctx, $score)
	#if($score)
		<span style="#if($score.preliminary)font-style: italic;#end">
			<span title="$score.niceStamp">$score.getNicePoints($elw_ctx.bundle.scoring.breakdown.get("code"), $elw_ctx.ass.scoring)</span>
			#set($terms = $score.getTerms($elw_ctx.bundle.scoring.breakdown.get("code")))
			#if($terms.size() > 0):
				#foreach($term in $terms)
					#if($term.positive)
						#set($termColor = "#00FF00")
					#else
						#set($termColor = "#FF0000")
					#end
						<span style="color: $termColor;" title="$elw_ctx.bundle.scoring.findCriteria($term.id).name ($term.pow)">$term.niceRatio</span>
				#end
			#end
		</span>
	#else
		None
	#end
#end

#macro (elw_report_score $elw_ctx, $score)
	#if($score && !$score.preliminary)
		<span style="#if($score.preliminary)font-style: italic;#end">
			<span title="$score.niceStamp">$score.getNicePoints($elw_ctx.bundle.scoring.breakdown.get("report"), $elw_ctx.ass.scoring)</span>
			#set($terms = $score.getTerms($elw_ctx.bundle.scoring.breakdown.get("report")))
			#if($terms.size() > 0):
				#foreach($term in $terms)
					#if($term.positive)
						#set($termColor = "#00FF00")
					#else
						#set($termColor = "#FF0000")
					#end
						<span style="color: $termColor;" title="$elw_ctx.bundle.scoring.findCriteria($term.id).name ($term.pow)">$term.niceRatio</span>
				#end
			#end
		</span>
	#else
		None
	#end
#end

#macro (elw_score $elw_ctx, $score)
	#if($score)
		<span style="#if($score.preliminary)font-style: italic;#end">
			<span title="$score.niceStamp">$score.getNiceTotal($elw_ctx.bundle.scoring, $elw_ctx.ass.scoring)</stamp>
		</span>
	#else
		None
	#end
#end